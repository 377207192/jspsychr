<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Walkthrough to build a Recognition memory experiment • jspsychr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Walkthrough to build a Recognition memory experiment">
<meta property="og:description" content="">
<meta property="og:image" content="https://crumplab.github.io/jspsychr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jspsychr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/jspsychr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/closerlook.html">Closer look at the functions</a>
    </li>
    <li>
      <a href="../articles/recognition.html">Walkthrough to build a Recognition memory experiment</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Walkthrough to build a Recognition memory experiment</h1>
            
      
      
      <div class="hidden name"><code>recognition.Rmd</code></div>

    </div>

    
    
<p>This is a tutorial on building a recognition memory experiment using jspsychr. The source code for all of this can be found here:</p>
<p><a href="https://github.com/CrumpLab/jspsychrexamples/tree/master/RecognitionMemory" class="uri">https://github.com/CrumpLab/jspsychrexamples/tree/master/RecognitionMemory</a></p>
<p>My aim in this example is to attempt a walkthrough and discussion of all the steps from beginning to end. So, I’m going to try and live code this and ‘think-aloud’ as I go.</p>
<div id="open-a-new-jspsychr-template" class="section level2">
<h2 class="hasAnchor">
<a href="#open-a-new-jspsychr-template" class="anchor"></a>open a new jspsychr template</h2>
<p>I just did this, so now I have a folder titled <code>RecognitionMemory</code>, and I am currently editing what is now <code>RecognitionMemory.Rmd</code>, the experiment description file. I haven’t touched anything else yet.</p>
<p>I’m going to use this file to write down what I’m doing as I make a recognition memory experiment.</p>
</div>
<div id="my-new-experiment" class="section level2">
<h2 class="hasAnchor">
<a href="#my-new-experiment" class="anchor"></a>My new experiment</h2>
<p>Let’s I want to build a slightly strange recognitionexperiment to test memory for arbitrary non-word strings. Let’s also say I want to test whether memory will be better or worse depending on the font-size of the string during encoding.</p>
<p>I need to do make non-word strings, figure out how many to present during encoding, how many to present during test, and then make jspsych run the experiment.</p>
</div>
<div id="r-code-chunk-generating-the-stimuli" class="section level2">
<h2 class="hasAnchor">
<a href="#r-code-chunk-generating-the-stimuli" class="anchor"></a>R code chunk: Generating the stimuli</h2>
<p>I’m going to generate the stimuli and basic design in R. First, I open <code>experiment/index.Rmd</code>. The jspsych libraries I need are already loaded in this piece of code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># load jspsych and plugin scripts</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># note: this is an r code chunk</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(htmltools)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw"><a href="https://rdrr.io/pkg/htmltools/man/tag.html">tagList</a></span>(</span>
<span id="cb1-5"><a href="#cb1-5"></a>tags<span class="op">$</span><span class="kw">script</span>(<span class="dt">src=</span><span class="st">'jspsych-6-2/jspsych.js'</span>),</span>
<span id="cb1-6"><a href="#cb1-6"></a>tags<span class="op">$</span><span class="kw">script</span>(<span class="dt">src=</span><span class="st">'jspsych-6-2/plugins/jspsych-html-keyboard-response.js'</span>),</span>
<span id="cb1-7"><a href="#cb1-7"></a>tags<span class="op">$</span><span class="kw">script</span>(<span class="dt">src=</span><span class="st">'jspsychr/jspsychr.js'</span>)</span>
<span id="cb1-8"><a href="#cb1-8"></a>)</span></code></pre></div>
<p>Great, next I’m goint to start editing the second r code chunk, which contains code to build a Stroop experiment. I’ll delete everything except for the two lines that call the libraries jspychr and dplyr. So, we’ll be starting with something like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(jspsychr)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt; </span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; </span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt; </span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<p>First, I need a bunch of non-words, let’s make them 5 letters long. And, let’s generate them completely randomly, such that any letter could be chosen for any position. I’ll write a function for this and test it.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a></span>
<span id="cb3-2"><a href="#cb3-2"></a>generate_random_string &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">n_letters =</span> <span class="dv">5</span>){</span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(LETTERS,n_letters, <span class="dt">replace=</span><span class="ot">TRUE</span>), <span class="dt">collapse=</span><span class="st">""</span>))</span>
<span id="cb3-4"><a href="#cb3-4"></a>}</span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="kw">generate_random_string</span>(<span class="dt">n_letters=</span> <span class="dv">5</span>)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; [1] "XGDCJ"</span></span></code></pre></div>
<p>Now, let’s say I want 100 total non-word strings. I’ll present 50 of them during encoding, and all of them at test. I need to run the above function 100 times, but I also want to make sure I don’t accidentally make the same non-word twice. My quick and dirty strategy will be to generate 200 nonwords and get all the unique ones. That should get me way more than than the 100 I need.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>non_words &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">5</span>,<span class="dv">200</span>), generate_random_string))</span>
<span id="cb4-2"><a href="#cb4-2"></a>non_words &lt;-<span class="st"> </span>non_words[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>]</span></code></pre></div>
<p>You can check that there are 100 non words by looking in the environment tab, or by printing non_words to the console, yup there they are:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>non_words</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#&gt;   [1] "SCJSG" "KGIQR" "IIKPH" "DRSGR" "WJFXZ" "RMDBZ" "QHDBO" "GMYOU"</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt;   [9] "ZDDRZ" "CLWAV" "PDDES" "XMBDA" "WZWRU" "IXMLR" "YARJU" "WOWPB"</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt;  [17] "OKFYN" "XTJCZ" "CGXFA" "RSKCY" "WHAWH" "IXYMV" "BGWHX" "MOERH"</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt;  [25] "ZHXHC" "MKTHA" "WJABV" "GJIDE" "RRIVE" "ETSAP" "RKIFB" "BANUW"</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;  [33] "VNSHM" "VVNXY" "SRPRX" "ICMON" "VTWNM" "RJKGZ" "HUXXA" "QLUVO"</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;  [41] "NNERJ" "IUWHD" "EPHSF" "EVXJJ" "WJIEJ" "GWBXN" "HTOTT" "AQYWY"</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;  [49] "JENRU" "OSQMV" "NFDBO" "AFGFR" "BQVIG" "XFPWA" "EYDVB" "DMYWH"</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;  [57] "WRZSL" "CLSMZ" "RFUMS" "IAVBI" "BRPDH" "XTMFV" "IQNZR" "TXAML"</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;  [65] "ZBQIZ" "UCFBA" "MVQTL" "AKVYO" "QQBRS" "BKMZK" "MEZEC" "OGFVC"</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;  [73] "GICZC" "PVXKZ" "HMCIO" "SGNVH" "OQHWR" "MMUMF" "SUDLD" "HBSHH"</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt;  [81] "TKCRX" "KNJKS" "OPYPY" "FSHUW" "YYPAR" "XHODZ" "STJDK" "GLZBC"</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt;  [89] "DPLLA" "ILPFG" "TQDMR" "GKUJS" "BKQUM" "UACBZ" "KAMEL" "BMLSJ"</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;  [97] "DAKTD" "CXPEE" "HLHPC" "BGTNE"</span></span></code></pre></div>
<p>Ok, great I have some nonwords. The next step is to create some data frames. I’m going to create one dataframe for the encoding phase, and another for the test phase. These dataframe will set up parameters for the experimental design that I will to jspsych later on.</p>
<p>Let’s look at the dataframe for the encoding phase. I want 50 words to be presented, I want to code the fact that they are presented during the encoding phase, and I want to manipulate font size. I’m going to make a dataframe with 4 columns: stimulus, string, phase, and font_size. I’ll populate the string column with the first 50 nonwords, and I’ll populate the font_size column with two levels of font size (15pt vs. 30pt), such that the first 25 items are assigned to 15pt and the remaining are assigned to 30pt.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>encoding_df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">stimulus =</span> <span class="ot">NA</span>,</span>
<span id="cb6-2"><a href="#cb6-2"></a>                          <span class="dt">string =</span> non_words[<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>],</span>
<span id="cb6-3"><a href="#cb6-3"></a>                          <span class="dt">phase =</span> <span class="st">"Encoding"</span>,</span>
<span id="cb6-4"><a href="#cb6-4"></a>                          <span class="dt">font_size =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"15pt"</span>,<span class="st">"30pt"</span>), <span class="dt">each =</span> <span class="dv">25</span>)</span>
<span id="cb6-5"><a href="#cb6-5"></a>                          )</span></code></pre></div>
<p>Notice that the stimulus column is defined as NA. The next step is to write the stimulus column. Eventually we pass all of this to jspsych, and what jspsych needs is the html definition for each stimulus. For example, the following html could be given to jspsych as the recipe for displaying it later on:</p>
<pre><code>&lt;p id = 'id_encode' style = 'font-size: 15pt;'&gt;YRTOX&lt;/p&gt;</code></pre>
<p>The above renders YRTOX as a <code>&lt;p&gt;</code> element (paragraph element), and it set’s the font-size style paramaeter to 15pt. I added an html id so that this unit can be controlled by javascript if one desired control over it for some reason.</p>
<p>Returning to our task, we want to write something like the above for each row of the encoding_df dataframe. This is where jspsychr comes in handy with the <code><a href="../reference/html_stimulus.html">html_stimulus()</a></code> function. It takes in a dataframe that has columns defining properties of a stimulus, and the associated css styles to render them (in this case the font_size column). So, the stimulus column can be written just like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>encoding_df<span class="op">$</span>stimulus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/html_stimulus.html">html_stimulus</a></span>(<span class="dt">df =</span> encoding_df, </span>
<span id="cb8-2"><a href="#cb8-2"></a>                                <span class="dt">html_content =</span> <span class="st">"string"</span>,</span>
<span id="cb8-3"><a href="#cb8-3"></a>                                <span class="dt">html_element =</span> <span class="st">"p"</span>,</span>
<span id="cb8-4"><a href="#cb8-4"></a>                                <span class="dt">column_names =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font_size"</span>),</span>
<span id="cb8-5"><a href="#cb8-5"></a>                                <span class="dt">css =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font-size"</span>),</span>
<span id="cb8-6"><a href="#cb8-6"></a>                                <span class="dt">id =</span> <span class="st">"id_encode"</span>)</span></code></pre></div>
<p>Let’s repeat these same steps to make another dataframe controlling the test trials. I’ll just copy and paste from above, change the phase to “test”, add a new column for type (to say OLD vs NEW), and row bind another dataframe for the NEW items, that has the rest of the non_words (51 to 100).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>test_df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">stimulus =</span> <span class="ot">NA</span>,</span>
<span id="cb9-2"><a href="#cb9-2"></a>                          <span class="dt">string =</span> non_words[<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>],</span>
<span id="cb9-3"><a href="#cb9-3"></a>                          <span class="dt">phase =</span> <span class="st">"test"</span>,</span>
<span id="cb9-4"><a href="#cb9-4"></a>                          <span class="dt">type =</span> <span class="st">"OLD"</span>,</span>
<span id="cb9-5"><a href="#cb9-5"></a>                          <span class="dt">font_size =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"15pt"</span>,<span class="st">"30pt"</span>), <span class="dt">each =</span> <span class="dv">25</span>)</span>
<span id="cb9-6"><a href="#cb9-6"></a>                          ) <span class="op">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(</span>
<span id="cb9-8"><a href="#cb9-8"></a>    <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">stimulus =</span> <span class="ot">NA</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>                          <span class="dt">string =</span> non_words[<span class="dv">51</span><span class="op">:</span><span class="dv">100</span>],</span>
<span id="cb9-10"><a href="#cb9-10"></a>                          <span class="dt">phase =</span> <span class="st">"test"</span>,</span>
<span id="cb9-11"><a href="#cb9-11"></a>                          <span class="dt">type =</span> <span class="st">"NEW"</span>,</span>
<span id="cb9-12"><a href="#cb9-12"></a>                          <span class="dt">font_size =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"15pt"</span>,<span class="st">"30pt"</span>), <span class="dt">each =</span> <span class="dv">25</span>)</span>
<span id="cb9-13"><a href="#cb9-13"></a>                          )</span>
<span id="cb9-14"><a href="#cb9-14"></a>  )</span></code></pre></div>
<p>Let’s write the stimulus column for test_df.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>test_df<span class="op">$</span>stimulus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/html_stimulus.html">html_stimulus</a></span>(<span class="dt">df =</span> test_df, </span>
<span id="cb10-2"><a href="#cb10-2"></a>                                <span class="dt">html_content =</span> <span class="st">"string"</span>,</span>
<span id="cb10-3"><a href="#cb10-3"></a>                                <span class="dt">html_element =</span> <span class="st">"p"</span>,</span>
<span id="cb10-4"><a href="#cb10-4"></a>                                <span class="dt">column_names =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font_size"</span>),</span>
<span id="cb10-5"><a href="#cb10-5"></a>                                <span class="dt">css =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font-size"</span>),</span>
<span id="cb10-6"><a href="#cb10-6"></a>                                <span class="dt">id =</span> <span class="st">"id_encode"</span>)</span></code></pre></div>
<p>Great, now all we need to do is turn these dataframes into a javascript object that we can send to jspsych. We can do this using jspsychr and the <code><a href="../reference/stimulus_df_to_json.html">stimulus_df_to_json()</a></code> function.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>encoding_json &lt;-<span class="st"> </span><span class="kw"><a href="../reference/stimulus_df_to_json.html">stimulus_df_to_json</a></span>(<span class="dt">df =</span> encoding_df,</span>
<span id="cb11-2"><a href="#cb11-2"></a>                                     <span class="dt">stimulus =</span> <span class="st">"stimulus"</span>,</span>
<span id="cb11-3"><a href="#cb11-3"></a>                                     <span class="dt">data =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"string"</span>,<span class="st">"phase"</span>,<span class="st">"font_size"</span>))</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a>test_json &lt;-<span class="st"> </span><span class="kw"><a href="../reference/stimulus_df_to_json.html">stimulus_df_to_json</a></span>(<span class="dt">df =</span> test_df,</span>
<span id="cb11-6"><a href="#cb11-6"></a>                                     <span class="dt">stimulus =</span> <span class="st">"stimulus"</span>,</span>
<span id="cb11-7"><a href="#cb11-7"></a>                                     <span class="dt">data =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"string"</span>,<span class="st">"phase"</span>,<span class="st">"type"</span>,<span class="st">"font_size"</span>))</span></code></pre></div>
<p>In the next step we are going to hand a javascript object over to jspsych, actually two of them, one to define the stimuli for the timeline associated with presenting the encoding items, and another for the test items.</p>
<p>This javascript object should contain a stimulus field and a data field for each stimulus. The data field allows you to insert condition codes that you want for each observation, and these will be recorded in the data file. So, it’s important at this step to think carefully about what codes (column factors and levels) you want for analysis later on. In this case, we’ll basically want the type (OLD vs NEW), and font-size (15pt vs 30pt) for each test item. I’ve added in phase for completeness (and to easily distinguish encoding vs test in the data file we’ll get later on).</p>
<p>The final step here is to actually write the json object to the html file that we are making. This will show up inside the html inside a <code>&lt;script&gt; &lt;/script&gt;</code> element in the html. We do this using jspsychr and the <code><a href="../reference/write_to_script.html">write_to_script()</a></code> function. For the writing to html to occur, the R code chunk needs to have the knitr option results = “asis”.</p>
<p>For example, this creates a new javascript variable called <code>encoding_stimuli</code>, that contains the json object in <code>encoding_json</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw"><a href="../reference/write_to_script.html">write_to_script</a></span>(encoding_json,<span class="st">"encoding_stimuli"</span>)</span></code></pre></div>
<p>This creates a new javascript variable called <code>test_stimuli</code>, that contains the json object in <code>test_json</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw"><a href="../reference/write_to_script.html">write_to_script</a></span>(test_json,<span class="st">"test_stimuli"</span>)</span></code></pre></div>
<p>Ok, let’s take a look at the entire R code chunk for generating the stimuli. This should be the same as the one you see in the <code>index.Rmd</code> file for this example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># load libraries</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(jspsychr)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co"># function to make nonwords</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>generate_random_string &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">n_letters =</span> <span class="dv">5</span>){</span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(LETTERS,n_letters, <span class="dt">replace=</span><span class="ot">TRUE</span>), <span class="dt">collapse=</span><span class="st">""</span>))</span>
<span id="cb14-8"><a href="#cb14-8"></a>}</span>
<span id="cb14-9"><a href="#cb14-9"></a></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co"># make 100 nonwords</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>non_words &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">5</span>,<span class="dv">200</span>), generate_random_string))</span>
<span id="cb14-12"><a href="#cb14-12"></a>non_words &lt;-<span class="st"> </span>non_words[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>]</span>
<span id="cb14-13"><a href="#cb14-13"></a></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="co"># make encoding dataframe</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>encoding_df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">stimulus =</span> <span class="ot">NA</span>,</span>
<span id="cb14-16"><a href="#cb14-16"></a>                          <span class="dt">string =</span> non_words[<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>],</span>
<span id="cb14-17"><a href="#cb14-17"></a>                          <span class="dt">phase =</span> <span class="st">"Encoding"</span>,</span>
<span id="cb14-18"><a href="#cb14-18"></a>                          <span class="dt">font_size =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"15pt"</span>,<span class="st">"30pt"</span>), <span class="dt">each =</span> <span class="dv">25</span>)</span>
<span id="cb14-19"><a href="#cb14-19"></a>                          )</span>
<span id="cb14-20"><a href="#cb14-20"></a></span>
<span id="cb14-21"><a href="#cb14-21"></a>encoding_df<span class="op">$</span>stimulus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/html_stimulus.html">html_stimulus</a></span>(<span class="dt">df =</span> encoding_df, </span>
<span id="cb14-22"><a href="#cb14-22"></a>                                <span class="dt">html_content =</span> <span class="st">"string"</span>,</span>
<span id="cb14-23"><a href="#cb14-23"></a>                                <span class="dt">html_element =</span> <span class="st">"p"</span>,</span>
<span id="cb14-24"><a href="#cb14-24"></a>                                <span class="dt">column_names =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font_size"</span>),</span>
<span id="cb14-25"><a href="#cb14-25"></a>                                <span class="dt">css =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font-size"</span>),</span>
<span id="cb14-26"><a href="#cb14-26"></a>                                <span class="dt">id =</span> <span class="st">"id_encode"</span>)</span>
<span id="cb14-27"><a href="#cb14-27"></a></span>
<span id="cb14-28"><a href="#cb14-28"></a><span class="co"># make test dataframe</span></span>
<span id="cb14-29"><a href="#cb14-29"></a>test_df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">stimulus =</span> <span class="ot">NA</span>,</span>
<span id="cb14-30"><a href="#cb14-30"></a>                          <span class="dt">string =</span> non_words[<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>],</span>
<span id="cb14-31"><a href="#cb14-31"></a>                          <span class="dt">phase =</span> <span class="st">"test"</span>,</span>
<span id="cb14-32"><a href="#cb14-32"></a>                          <span class="dt">type =</span> <span class="st">"OLD"</span>,</span>
<span id="cb14-33"><a href="#cb14-33"></a>                          <span class="dt">font_size =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"15pt"</span>,<span class="st">"30pt"</span>), <span class="dt">each =</span> <span class="dv">25</span>)</span>
<span id="cb14-34"><a href="#cb14-34"></a>                          ) <span class="op">%&gt;%</span></span>
<span id="cb14-35"><a href="#cb14-35"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(</span>
<span id="cb14-36"><a href="#cb14-36"></a>    <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">stimulus =</span> <span class="ot">NA</span>,</span>
<span id="cb14-37"><a href="#cb14-37"></a>                          <span class="dt">string =</span> non_words[<span class="dv">51</span><span class="op">:</span><span class="dv">100</span>],</span>
<span id="cb14-38"><a href="#cb14-38"></a>                          <span class="dt">phase =</span> <span class="st">"test"</span>,</span>
<span id="cb14-39"><a href="#cb14-39"></a>                          <span class="dt">type =</span> <span class="st">"NEW"</span>,</span>
<span id="cb14-40"><a href="#cb14-40"></a>                          <span class="dt">font_size =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"15pt"</span>,<span class="st">"30pt"</span>), <span class="dt">each =</span> <span class="dv">25</span>)</span>
<span id="cb14-41"><a href="#cb14-41"></a>                          )</span>
<span id="cb14-42"><a href="#cb14-42"></a>  )</span>
<span id="cb14-43"><a href="#cb14-43"></a></span>
<span id="cb14-44"><a href="#cb14-44"></a>test_df<span class="op">$</span>stimulus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/html_stimulus.html">html_stimulus</a></span>(<span class="dt">df =</span> test_df, </span>
<span id="cb14-45"><a href="#cb14-45"></a>                                <span class="dt">html_content =</span> <span class="st">"string"</span>,</span>
<span id="cb14-46"><a href="#cb14-46"></a>                                <span class="dt">html_element =</span> <span class="st">"p"</span>,</span>
<span id="cb14-47"><a href="#cb14-47"></a>                                <span class="dt">column_names =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font_size"</span>),</span>
<span id="cb14-48"><a href="#cb14-48"></a>                                <span class="dt">css =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"font-size"</span>),</span>
<span id="cb14-49"><a href="#cb14-49"></a>                                <span class="dt">id =</span> <span class="st">"id_encode"</span>)</span>
<span id="cb14-50"><a href="#cb14-50"></a></span>
<span id="cb14-51"><a href="#cb14-51"></a><span class="co"># write json objects</span></span>
<span id="cb14-52"><a href="#cb14-52"></a>encoding_json &lt;-<span class="st"> </span><span class="kw"><a href="../reference/stimulus_df_to_json.html">stimulus_df_to_json</a></span>(<span class="dt">df =</span> encoding_df,</span>
<span id="cb14-53"><a href="#cb14-53"></a>                                     <span class="dt">stimulus =</span> <span class="st">"stimulus"</span>,</span>
<span id="cb14-54"><a href="#cb14-54"></a>                                     <span class="dt">data =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"string"</span>,<span class="st">"phase"</span>,<span class="st">"font_size"</span>))</span>
<span id="cb14-55"><a href="#cb14-55"></a></span>
<span id="cb14-56"><a href="#cb14-56"></a>test_json &lt;-<span class="st"> </span><span class="kw"><a href="../reference/stimulus_df_to_json.html">stimulus_df_to_json</a></span>(<span class="dt">df =</span> test_df,</span>
<span id="cb14-57"><a href="#cb14-57"></a>                                     <span class="dt">stimulus =</span> <span class="st">"stimulus"</span>,</span>
<span id="cb14-58"><a href="#cb14-58"></a>                                     <span class="dt">data =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"string"</span>,<span class="st">"phase"</span>,<span class="st">"type"</span>,<span class="st">"font_size"</span>))</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw"><a href="../reference/write_to_script.html">write_to_script</a></span>(encoding_json,<span class="st">"encoding_stimuli"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw"><a href="../reference/write_to_script.html">write_to_script</a></span>(test_json,<span class="st">"test_stimuli"</span>)</span></code></pre></div>
</div>
<div id="js-code-block-the-jspsych-stuff" class="section level2">
<h2 class="hasAnchor">
<a href="#js-code-block-the-jspsych-stuff" class="anchor"></a>js code block: the jspsych stuff</h2>
<p>The next steps are to modify/rewrite the js code block, which is a bunch of javascript…we are now in the world of javascript…don’t worry, if you don’t know javascript, it’s not too bad.</p>
<p>Let’s first take a look at some code that would be loaded by the default jspsychr template, this is located toward the bottom of the js code chunk. We’re looking at the jspsych timeline variable. This bit of code makes the timeline variable, and that adds to the timeline by pushing, in order, various parts that occur in the experiment (e.g., show a welcome screen, show instructions, do the test, show a debrief screen).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">/*set up experiment structure*/</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> timeline <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="va">timeline</span>.<span class="at">push</span>(welcome)<span class="op">;</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="va">timeline</span>.<span class="at">push</span>(instructions)<span class="op">;</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="va">timeline</span>.<span class="at">push</span>(test)<span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="va">timeline</span>.<span class="at">push</span>(debrief)<span class="op">;</span></span></code></pre></div>
<p>We’ll want something like this, but need to add an encoding phase after the instructions, and before the test. Maybe also add some test instructions after encodoing phase, before the test phase. All of this is just to show a bit of where we are headed, we need to make some new jspsych objects that will fit into the timeline.</p>
<p>Let’s start from the top. Here we make a welcome object, this will display the message in the stimulus field, and require a button press to continue (using the html-keyboard-response plugin). We also say that the each trial will occur once.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1"></a><span class="co">/* Note this is a js (javascript) code chunk</span></span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">/* experiment parameters */</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> reps_per_trial_type <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb18-5"><a href="#cb18-5"></a></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co">/*set up welcome block*/</span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> welcome <span class="op">=</span> <span class="op">{</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment. Press any key to begin."</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="op">};</span></span></code></pre></div>
<p>Let’s make some encoding instructions.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1"></a></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co">/*set up instructions block*/</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> encoding_instructions <span class="op">=</span> <span class="op">{</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;p&gt;You will see some nonwords&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>    <span class="st">"&lt;p&gt;Remember them for a later memory test&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>    <span class="st">"&lt;p&gt;Press any key to begin.&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="op">};</span></span></code></pre></div>
<p>Now we define how the encoding phase will take place. Note we have assigned <code>encoding_stimuli</code> (our json object containing the encoding stimuli) to the <code>timeline_variables</code> field. And, <code>randomize_order: true</code> will randomize the order of presentation for us. The trial_duration has each nonword being presented for 500ms, pretty fast, pay attention!</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1"></a></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="co">/* defining encoding timeline */</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> encoding <span class="op">=</span> <span class="op">{</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="dt">timeline</span><span class="op">:</span> [<span class="op">{</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">'html-keyboard-response'</span><span class="op">,</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'stimulus'</span>)<span class="op">,</span></span>
<span id="cb20-8"><a href="#cb20-8"></a>    <span class="dt">data</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'data'</span>)</span>
<span id="cb20-9"><a href="#cb20-9"></a>  <span class="op">}</span>]<span class="op">,</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> encoding_stimuli<span class="op">,</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="op">};</span></span></code></pre></div>
<p>Let’s make some test instructions.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1"></a></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co">/*set up instructions block*/</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> test_instructions <span class="op">=</span> <span class="op">{</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;p&gt;You will see some OLD nonwords&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="st">"&lt;p&gt;And some NEW nonwords&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>    <span class="st">"&lt;p&gt;Press O for OLD, and N for NEW&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>    <span class="st">"&lt;p&gt;Press any key to begin.&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="op">};</span></span></code></pre></div>
<p>And define the test phase timeline. Note we have assigned <code>test_stimuli</code> (our json object containing the test stimuli) to the <code>timeline_variables</code> field. And, <code>randomize_order: true</code> will randomize the order of presentation for us. We also set the response keyboard choices to accept “o” or “n” as responses.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1"></a></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="co">/* defining test timeline */</span></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> testing <span class="op">=</span> <span class="op">{</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>  <span class="dt">timeline</span><span class="op">:</span> [<span class="op">{</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">'html-keyboard-response'</span><span class="op">,</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"o"</span><span class="op">,</span><span class="st">"n"</span>]<span class="op">,</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>    <span class="dt">response_ends_trial</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb22-8"><a href="#cb22-8"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'stimulus'</span>)<span class="op">,</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>    <span class="dt">data</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'data'</span>)</span>
<span id="cb22-10"><a href="#cb22-10"></a>  <span class="op">}</span>]<span class="op">,</span></span>
<span id="cb22-11"><a href="#cb22-11"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> test_stimuli<span class="op">,</span></span>
<span id="cb22-12"><a href="#cb22-12"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb22-13"><a href="#cb22-13"></a><span class="op">};</span></span></code></pre></div>
<p>Let’s make a debriefing.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1"></a></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="co">/*set up debrief block*/</span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> debrief <span class="op">=</span> <span class="op">{</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;p&gt;Thanks for participating!&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="op">};</span></span></code></pre></div>
<p>Finally, we add everything to the timeline, and initialize the experiment.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1"></a><span class="co">/*set up experiment structure*/</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> timeline <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="va">timeline</span>.<span class="at">push</span>(welcome)<span class="op">;</span></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="va">timeline</span>.<span class="at">push</span>(encoding_instructions)<span class="op">;</span></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="va">timeline</span>.<span class="at">push</span>(encoding)<span class="op">;</span></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="va">timeline</span>.<span class="at">push</span>(test_instructions)<span class="op">;</span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="va">timeline</span>.<span class="at">push</span>(testing)<span class="op">;</span></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="va">timeline</span>.<span class="at">push</span>(debrief)<span class="op">;</span></span>
<span id="cb24-9"><a href="#cb24-9"></a></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co">/*start experiment*/</span></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="va">jsPsych</span>.<span class="at">init</span>(<span class="op">{</span></span>
<span id="cb24-12"><a href="#cb24-12"></a>    <span class="dt">timeline</span><span class="op">:</span> timeline<span class="op">,</span></span>
<span id="cb24-13"><a href="#cb24-13"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">function</a></span>() <span class="op">{</span></span>
<span id="cb24-14"><a href="#cb24-14"></a>        <span class="va">jsPsych</span>.<span class="va">data</span>.<span class="at">displayData</span>()<span class="op">;</span></span>
<span id="cb24-15"><a href="#cb24-15"></a>    <span class="op">}</span></span>
<span id="cb24-16"><a href="#cb24-16"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>The whole thing should look liek this:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1"></a><span class="co">/* Note this is a js (javascript) code chunk</span></span>
<span id="cb25-2"><a href="#cb25-2"></a></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="co">/* experiment parameters */</span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> reps_per_trial_type <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb25-5"><a href="#cb25-5"></a></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="co">/*set up welcome block*/</span></span>
<span id="cb25-7"><a href="#cb25-7"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> welcome <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb25-9"><a href="#cb25-9"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment. Press any key to begin."</span></span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="op">};</span></span>
<span id="cb25-11"><a href="#cb25-11"></a></span>
<span id="cb25-12"><a href="#cb25-12"></a><span class="co">/*set up instructions block*/</span></span>
<span id="cb25-13"><a href="#cb25-13"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> encoding_instructions <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-14"><a href="#cb25-14"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb25-15"><a href="#cb25-15"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;p&gt;You will see some nonwords&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb25-16"><a href="#cb25-16"></a>    <span class="st">"&lt;p&gt;Remember them for a later memory test&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb25-17"><a href="#cb25-17"></a>    <span class="st">"&lt;p&gt;Press any key to begin.&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb25-19"><a href="#cb25-19"></a><span class="op">};</span></span>
<span id="cb25-20"><a href="#cb25-20"></a></span>
<span id="cb25-21"><a href="#cb25-21"></a></span>
<span id="cb25-22"><a href="#cb25-22"></a><span class="co">/* defining encoding timeline */</span></span>
<span id="cb25-23"><a href="#cb25-23"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> encoding <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-24"><a href="#cb25-24"></a>  <span class="dt">timeline</span><span class="op">:</span> [<span class="op">{</span></span>
<span id="cb25-25"><a href="#cb25-25"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">'html-keyboard-response'</span><span class="op">,</span></span>
<span id="cb25-26"><a href="#cb25-26"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb25-27"><a href="#cb25-27"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'stimulus'</span>)<span class="op">,</span></span>
<span id="cb25-28"><a href="#cb25-28"></a>    <span class="dt">data</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'data'</span>)</span>
<span id="cb25-29"><a href="#cb25-29"></a>  <span class="op">}</span>]<span class="op">,</span></span>
<span id="cb25-30"><a href="#cb25-30"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> encoding_stimuli<span class="op">,</span></span>
<span id="cb25-31"><a href="#cb25-31"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb25-32"><a href="#cb25-32"></a><span class="op">};</span></span>
<span id="cb25-33"><a href="#cb25-33"></a></span>
<span id="cb25-34"><a href="#cb25-34"></a><span class="co">/*set up instructions block*/</span></span>
<span id="cb25-35"><a href="#cb25-35"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> test_instructions <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-36"><a href="#cb25-36"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb25-37"><a href="#cb25-37"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;p&gt;You will see some OLD nonwords&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb25-38"><a href="#cb25-38"></a>    <span class="st">"&lt;p&gt;And some NEW nonwords&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb25-39"><a href="#cb25-39"></a>    <span class="st">"&lt;p&gt;Press O for OLD, and N for NEW&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb25-40"><a href="#cb25-40"></a>    <span class="st">"&lt;p&gt;Press any key to begin.&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb25-41"><a href="#cb25-41"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb25-42"><a href="#cb25-42"></a><span class="op">};</span></span>
<span id="cb25-43"><a href="#cb25-43"></a></span>
<span id="cb25-44"><a href="#cb25-44"></a><span class="co">/* defining test timeline */</span></span>
<span id="cb25-45"><a href="#cb25-45"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> testing <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-46"><a href="#cb25-46"></a>  <span class="dt">timeline</span><span class="op">:</span> [<span class="op">{</span></span>
<span id="cb25-47"><a href="#cb25-47"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">'html-keyboard-response'</span><span class="op">,</span></span>
<span id="cb25-48"><a href="#cb25-48"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"o"</span><span class="op">,</span><span class="st">"n"</span>]<span class="op">,</span></span>
<span id="cb25-49"><a href="#cb25-49"></a>    <span class="dt">response_ends_trial</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb25-50"><a href="#cb25-50"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'stimulus'</span>)<span class="op">,</span></span>
<span id="cb25-51"><a href="#cb25-51"></a>    <span class="dt">data</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'data'</span>)</span>
<span id="cb25-52"><a href="#cb25-52"></a>  <span class="op">}</span>]<span class="op">,</span></span>
<span id="cb25-53"><a href="#cb25-53"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> test_stimuli<span class="op">,</span></span>
<span id="cb25-54"><a href="#cb25-54"></a>  <span class="dt">randomize_order</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb25-55"><a href="#cb25-55"></a><span class="op">};</span></span>
<span id="cb25-56"><a href="#cb25-56"></a></span>
<span id="cb25-57"><a href="#cb25-57"></a><span class="co">/*set up debrief block*/</span></span>
<span id="cb25-58"><a href="#cb25-58"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> debrief <span class="op">=</span> <span class="op">{</span></span>
<span id="cb25-59"><a href="#cb25-59"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb25-60"><a href="#cb25-60"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;p&gt;Thanks for participating!&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb25-61"><a href="#cb25-61"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb25-62"><a href="#cb25-62"></a><span class="op">};</span></span>
<span id="cb25-63"><a href="#cb25-63"></a></span>
<span id="cb25-64"><a href="#cb25-64"></a><span class="co">/*set up experiment structure*/</span></span>
<span id="cb25-65"><a href="#cb25-65"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> timeline <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb25-66"><a href="#cb25-66"></a><span class="va">timeline</span>.<span class="at">push</span>(welcome)<span class="op">;</span></span>
<span id="cb25-67"><a href="#cb25-67"></a><span class="va">timeline</span>.<span class="at">push</span>(encoding_instructions)<span class="op">;</span></span>
<span id="cb25-68"><a href="#cb25-68"></a><span class="va">timeline</span>.<span class="at">push</span>(encoding)<span class="op">;</span></span>
<span id="cb25-69"><a href="#cb25-69"></a><span class="va">timeline</span>.<span class="at">push</span>(test_instructions)<span class="op">;</span></span>
<span id="cb25-70"><a href="#cb25-70"></a><span class="va">timeline</span>.<span class="at">push</span>(testing)<span class="op">;</span></span>
<span id="cb25-71"><a href="#cb25-71"></a><span class="va">timeline</span>.<span class="at">push</span>(debrief)<span class="op">;</span></span>
<span id="cb25-72"><a href="#cb25-72"></a></span>
<span id="cb25-73"><a href="#cb25-73"></a><span class="co">/*start experiment*/</span></span>
<span id="cb25-74"><a href="#cb25-74"></a><span class="va">jsPsych</span>.<span class="at">init</span>(<span class="op">{</span></span>
<span id="cb25-75"><a href="#cb25-75"></a>    <span class="dt">timeline</span><span class="op">:</span> timeline<span class="op">,</span></span>
<span id="cb25-76"><a href="#cb25-76"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">function</a></span>() <span class="op">{</span></span>
<span id="cb25-77"><a href="#cb25-77"></a>        <span class="va">jsPsych</span>.<span class="va">data</span>.<span class="at">displayData</span>()<span class="op">;</span></span>
<span id="cb25-78"><a href="#cb25-78"></a>    <span class="op">}</span></span>
<span id="cb25-79"><a href="#cb25-79"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
</div>
<div id="thats-it" class="section level2">
<h2 class="hasAnchor">
<a href="#thats-it" class="anchor"></a>That’s it</h2>
<p>For now, that’s it. You should be able to knit the <code>index.Rmd</code> file, generate the html file, and the run the html file in the browser. The data will be displayed in the browser window at the end of the experiment.</p>
<p>I’ll add more to this tutorial soon to describe how to save the data to a .csv file if you are running locally.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#open-a-new-jspsychr-template">open a new jspsychr template</a></li>
      <li><a href="#my-new-experiment">My new experiment</a></li>
      <li><a href="#r-code-chunk-generating-the-stimuli">R code chunk: Generating the stimuli</a></li>
      <li><a href="#js-code-block-the-jspsych-stuff">js code block: the jspsych stuff</a></li>
      <li><a href="#thats-it">That’s it</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matt Crump.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
