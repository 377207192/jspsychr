<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get Started • jspsychr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<meta property="og:description" content="">
<meta property="og:image" content="https://crumplab.github.io/jspsychr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jspsychr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/jspsychr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/closerlook.html">Closer look at the functions</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Get Started</h1>
            
      
      
      <div class="hidden name"><code>jspsychr.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><code>jspsychr</code> provides a simple way to make <a href="https://www.jspsych.org">jspsych</a> experiments using R-studio. See last section for a brief history on the development of this package and it’s relationship to other similar packages like <a href="https://github.com/djnavarro/xprmntr">xprmntr</a>, and <a href="https://github.com/djnavarro/jaysire">jaysire</a>.</p>
</div>
<div id="whats-in-jspsychr" class="section level2">
<h2 class="hasAnchor">
<a href="#whats-in-jspsychr" class="anchor"></a>What’s in jspsychr?</h2>
<ol style="list-style-type: decimal">
<li>An R markdown template for building jspsych experiments. After you install jspsychr, the template should be available when you create a new R markdown document inside R studio</li>
<li>Some helper functions that:</li>
</ol>
<ul>
<li>allow running the jspsych experiment locally using plumber (thanks to Danielle Navarro, this functionality is modified slightly from her packages)</li>
<li>allow you to build dataframes in R for controlling jspsych, and pass them to the jspsych experiment</li>
</ul>
</div>
<div id="the-big-idea" class="section level2">
<h2 class="hasAnchor">
<a href="#the-big-idea" class="anchor"></a>The big idea</h2>
<p><code>jspsychr</code> uses the built-in ability of knitr and R-studio to compile html documents from an .Rmd file. Experiments in jspsych are typically written as an html file that includes calls to jspsych libraries, and javascript to run the jspsych experiment. The approach here is to put all of this stuff inside an .Rmd document, and then compile it to an html document that runs the experiment. This allows you to write, run, test, and debug a jspsych experiment all inside R-studio. So, if you prefer working inside R-studio (for text editing jspsych experiments), this approach might be for you.</p>
</div>
<div id="installing-jspsychr" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-jspsychr" class="anchor"></a>installing jspsychr</h2>
<p>Install devtools first if you need to, then run:</p>
<pre><code><a href="https://rdrr.io/pkg/devtools/man/reexports.html"># install.packages("devtools")
devtools::install_github("CrumpLab/jspsychr")</a></code></pre>
</div>
<div id="jspsychr-template" class="section level2">
<h2 class="hasAnchor">
<a href="#jspsychr-template" class="anchor"></a>jspsychr template</h2>
<p>Once installed, you will want to restart R-studio. Then, you should be able to load up a new jspsychr R markdown template. NOTE: jspyschr will assume you are working in an R project, so before making a new jspsychr template, it would be a good idea to create yourself a new R-studio project and work within that. Once you’ve got your blank R-studio project, choose new R markdown, then from template, then find jspsychr, give it a name and load it up. In this example I’ve given my template the name <code>Experiment_1</code>.</p>
<p>When the template loads, you should find a new folder with the name you gave it. The folder has the following structure:</p>
<pre><code>-- Experiment_1
   |__data # folder for data files
   |__Experiment_1.Rmd # a description file for your experiment
   |__experiment # folder for experiment scripts
      |__index.html # the jspsych experiment
      |__index.Rmd # generates the above experiment
      |__jspsych-6-2 # jspsych javascript library
      |__jspsychr # jspsychr javascript library
   |__run.R # a file to run the experiment locally with plumber
-- testjspsych.Rproj # your R project file</code></pre>
</div>
<div id="index-rmd" class="section level2">
<h2 class="hasAnchor">
<a href="#index-rmd" class="anchor"></a>index.Rmd</h2>
<p>The <code>index.Rmd</code> file is where all the magic happens. You code your jspsych experiment here, then knit it to produce the html (index.html) that you need to run the experiment in a browser. The example loaded by the template shows a simple Stroop experiment, and uses some <code>jspsychr</code> functions to build the stimulus set for the experiment.</p>
<p>After knitting index.html, you should be able to run the experiment in your browser by loading the <code>index.html</code> file in your browser. Alternatively, you can run the code inside the <code>run.R</code> file, which will turn R-studio into a server (using plumber), and load the <code>index.html</code> into a browser for you.</p>
</div>
<div id="major-components-of-index-rmd" class="section level2">
<h2 class="hasAnchor">
<a href="#major-components-of-index-rmd" class="anchor"></a>Major components of index.Rmd</h2>
<p>There are three major components to the index.Rmd file: the yml, R code chunks, and js code chunks.</p>
</div>
<div id="yml" class="section level2">
<h2 class="hasAnchor">
<a href="#yml" class="anchor"></a>yml</h2>
<p>The yml is at the top, and you mostly don’t need to modify it. You can give your experiment a name, and give yourself a name. Otherwise, this yml makes a mostly empty html file, and loads the css style from the jspsych library.</p>
<pre><code>---
title: "Experiment Name"
author: "Your Name"
output:
  html_document:
    mathjax: null
    highlight: null
    theme: null
    css: jspsych-6-2/css/jspsych.css
---</code></pre>
</div>
<div id="r-code-chunk-to-load-jspsych-plugins" class="section level2">
<h2 class="hasAnchor">
<a href="#r-code-chunk-to-load-jspsych-plugins" class="anchor"></a>R code chunk to load jspsych plugins</h2>
<p>We use an r code chunk to write the jspsych library and plugins, as well as the jspsychr.js file to the html generated by index.Rmd. The example below is from the example generated by the jspsychr template. If you are using different jspsych plugins, you will need to load them in here. Note, the writing of a script to html is done by the htmltools package.</p>
<pre><code>```{r}
# load jspsych and plugin scripts
# note: this is an r code chunk
library(htmltools)
tagList(
tags$script(src='jspsych-6-2/jspsych.js'),
tags$script(src='jspsych-6-2/plugins/jspsych-html-keyboard-response.js'),
tags$script(src='jspsychr/jspsychr.js')
)
```</code></pre>
</div>
<div id="r-code-chunk-to-create-stimuli" class="section level2">
<h2 class="hasAnchor">
<a href="#r-code-chunk-to-create-stimuli" class="anchor"></a>R code chunk to create stimuli</h2>
<p>This next step uses R to create stimuli, rather than using javascript to create stimuli. The example experiment is a Stroop experiment with word and color pairs generated from combinations of red, green, blue, and yellow. <code>jspsych</code> needs a javascript object with definitions for the stimulus to be displayed on each trial. Rather than writing that in javascript, jspsychr allows you to write in R, and then output as a javascript object. In this example, I create a data frame coding various properties of the stimuli I am creating, and then this dataframe is converted to a json object, and stored as javascript variable (i.e., that is written to index.html during knitting).</p>
<p>Note that the following code is placed within a knitr r code chunk with results=“asis”</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Define stimuli in R, output as script </span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co"># note: this is an r code chunk, with results = "asis"</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(jspsychr)</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb4-5"><a href="#cb4-5"></a></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co"># create dataframe to define stimuli</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>stroop_stim &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>( <span class="dt">stimulus =</span> <span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="dv">16</span>),</span>
<span id="cb4-8"><a href="#cb4-8"></a>                           <span class="dt">word =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"red"</span>,<span class="st">"green"</span>,<span class="st">"blue"</span>,<span class="st">"yellow"</span>), <span class="dt">each=</span><span class="dv">4</span>),</span>
<span id="cb4-9"><a href="#cb4-9"></a>                           <span class="dt">color =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"red"</span>,<span class="st">"green"</span>,<span class="st">"blue"</span>,<span class="st">"yellow"</span>), <span class="dv">4</span>),</span>
<span id="cb4-10"><a href="#cb4-10"></a>                           <span class="dt">response =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"r"</span>,<span class="st">"g"</span>,<span class="st">"b"</span>,<span class="st">"y"</span>), <span class="dv">4</span>),</span>
<span id="cb4-11"><a href="#cb4-11"></a>                           <span class="dt">stim_type =</span> <span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="dv">16</span>),</span>
<span id="cb4-12"><a href="#cb4-12"></a>                           <span class="dt">id =</span> <span class="st">"stroop_stim"</span>,</span>
<span id="cb4-13"><a href="#cb4-13"></a>                           <span class="dt">fontsize =</span> <span class="st">"60pt"</span>) <span class="op">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">stim_type =</span> <span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(word<span class="op">==</span>color)) <span class="op">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">stim_type =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span>(stim_type, <span class="st">`</span><span class="dt">1</span><span class="st">`</span> =<span class="st"> "congruent"</span>, <span class="st">`</span><span class="dt">0</span><span class="st">`</span> =<span class="st"> "incongruent"</span>))</span>
<span id="cb4-16"><a href="#cb4-16"></a></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co"># write html definitions to the stimulus column</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co"># note this could be added as a pipe to the above</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>stroop_stim<span class="op">$</span>stimulus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/html_stimulus.html">html_stimulus</a></span>(<span class="dt">df =</span> stroop_stim, </span>
<span id="cb4-20"><a href="#cb4-20"></a>                                <span class="dt">html_content =</span> <span class="st">"word"</span>,</span>
<span id="cb4-21"><a href="#cb4-21"></a>                                <span class="dt">html_element =</span> <span class="st">"p"</span>,</span>
<span id="cb4-22"><a href="#cb4-22"></a>                                <span class="dt">column_names =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"color"</span>,<span class="st">"fontsize"</span>),</span>
<span id="cb4-23"><a href="#cb4-23"></a>                                <span class="dt">css =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"color"</span>, <span class="st">"font-size"</span>),</span>
<span id="cb4-24"><a href="#cb4-24"></a>                                <span class="dt">id =</span> <span class="st">"id"</span>)</span>
<span id="cb4-25"><a href="#cb4-25"></a></span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co"># create json object from dataframe</span></span>
<span id="cb4-27"><a href="#cb4-27"></a>stimulus_json &lt;-<span class="st"> </span><span class="kw"><a href="../reference/stimulus_df_to_json.html">stimulus_df_to_json</a></span>(<span class="dt">df =</span> stroop_stim,</span>
<span id="cb4-28"><a href="#cb4-28"></a>                                     <span class="dt">stimulus =</span> <span class="st">"stimulus"</span>,</span>
<span id="cb4-29"><a href="#cb4-29"></a>                                     <span class="dt">data =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"word"</span>,<span class="st">"color"</span>,<span class="st">"response"</span>,<span class="st">"stim_type"</span>))</span>
<span id="cb4-30"><a href="#cb4-30"></a></span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="co"># write json object to script</span></span>
<span id="cb4-32"><a href="#cb4-32"></a><span class="kw"><a href="../reference/write_to_script.html">write_to_script</a></span>(stimulus_json,<span class="st">"test_stimuli"</span>)</span></code></pre></div>
</div>
<div id="js-code-chunk-for-jspsych" class="section level2">
<h2 class="hasAnchor">
<a href="#js-code-chunk-for-jspsych" class="anchor"></a>js code chunk for jspsych</h2>
<p>The rest of the work is all written in javascript, by using a js code chunk rather than an R code chunk.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">/* Note this is a js (javascript) code chunk</span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">/* experiment parameters */</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> reps_per_trial_type <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">/*set up welcome block*/</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> welcome <span class="op">=</span> <span class="op">{</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"Welcome to the experiment. Press any key to begin."</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="op">};</span></span>
<span id="cb5-11"><a href="#cb5-11"></a></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">/*set up instructions block*/</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> instructions <span class="op">=</span> <span class="op">{</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;p&gt;In this task, you will see word in a color&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>    <span class="st">"&lt;p style='color:red;font-size:60pt;'&gt;BLUE&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>    <span class="st">"&lt;p&gt;Press r, g, b, or y to identify the color, not the word&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>    <span class="st">"&lt;p&gt;E.g., press r for red in this example&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>    <span class="st">"&lt;p&gt;Press any key to begin.&lt;/p&gt;"</span><span class="op">,</span></span>
<span id="cb5-20"><a href="#cb5-20"></a>  <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="op">};</span></span>
<span id="cb5-22"><a href="#cb5-22"></a></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="co">/* defining test timeline */</span></span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> test <span class="op">=</span> <span class="op">{</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>  <span class="dt">timeline</span><span class="op">:</span> [<span class="op">{</span></span>
<span id="cb5-26"><a href="#cb5-26"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">'html-keyboard-response'</span><span class="op">,</span></span>
<span id="cb5-27"><a href="#cb5-27"></a>    <span class="dt">choices</span><span class="op">:</span> [<span class="st">"r"</span><span class="op">,</span><span class="st">"g"</span><span class="op">,</span><span class="st">"b"</span><span class="op">,</span><span class="st">"y"</span>]<span class="op">,</span></span>
<span id="cb5-28"><a href="#cb5-28"></a>    <span class="dt">trial_duration</span><span class="op">:</span> <span class="dv">2000</span><span class="op">,</span></span>
<span id="cb5-29"><a href="#cb5-29"></a>    <span class="dt">response_ends_trial</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-30"><a href="#cb5-30"></a>    <span class="dt">stimulus</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'stimulus'</span>)<span class="op">,</span></span>
<span id="cb5-31"><a href="#cb5-31"></a>    <span class="dt">data</span><span class="op">:</span> <span class="va">jsPsych</span>.<span class="at">timelineVariable</span>(<span class="st">'data'</span>)<span class="op">,</span></span>
<span id="cb5-32"><a href="#cb5-32"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">function</a></span>(data)<span class="op">{</span></span>
<span id="cb5-33"><a href="#cb5-33"></a>      <span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> correct <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb5-34"><a href="#cb5-34"></a>      <span class="cf">if</span>(<span class="va">data</span>.<span class="at">response</span> <span class="op">==</span> <span class="st">'r'</span> <span class="op">&amp;&amp;</span>  <span class="va">data</span>.<span class="at">key_press</span> <span class="op">==</span> <span class="dv">82</span> <span class="op">&amp;&amp;</span> <span class="va">data</span>.<span class="at">rt</span> <span class="op">&gt;</span> <span class="dv">-1</span>)<span class="op">{</span></span>
<span id="cb5-35"><a href="#cb5-35"></a>        correct <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-36"><a href="#cb5-36"></a>      <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span>(<span class="va">data</span>.<span class="at">response</span> <span class="op">==</span> <span class="st">'g'</span> <span class="op">&amp;&amp;</span>  <span class="va">data</span>.<span class="at">key_press</span> <span class="op">==</span> <span class="dv">71</span> <span class="op">&amp;&amp;</span> <span class="va">data</span>.<span class="at">rt</span> <span class="op">&gt;</span> <span class="dv">-1</span>)<span class="op">{</span></span>
<span id="cb5-37"><a href="#cb5-37"></a>        correct <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-38"><a href="#cb5-38"></a>      <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span>(<span class="va">data</span>.<span class="at">response</span> <span class="op">==</span> <span class="st">'b'</span> <span class="op">&amp;&amp;</span>  <span class="va">data</span>.<span class="at">key_press</span> <span class="op">==</span> <span class="dv">66</span> <span class="op">&amp;&amp;</span> <span class="va">data</span>.<span class="at">rt</span> <span class="op">&gt;</span> <span class="dv">-1</span>)<span class="op">{</span></span>
<span id="cb5-39"><a href="#cb5-39"></a>        correct <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-40"><a href="#cb5-40"></a>      <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span>(<span class="va">data</span>.<span class="at">response</span> <span class="op">==</span> <span class="st">'y'</span> <span class="op">&amp;&amp;</span>  <span class="va">data</span>.<span class="at">key_press</span> <span class="op">==</span> <span class="dv">89</span> <span class="op">&amp;&amp;</span> <span class="va">data</span>.<span class="at">rt</span> <span class="op">&gt;</span> <span class="dv">-1</span>)<span class="op">{</span></span>
<span id="cb5-41"><a href="#cb5-41"></a>        correct <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb5-42"><a href="#cb5-42"></a>      <span class="op">}</span></span>
<span id="cb5-43"><a href="#cb5-43"></a>      <span class="va">data</span>.<span class="at">correct</span> <span class="op">=</span> correct<span class="op">;</span></span>
<span id="cb5-44"><a href="#cb5-44"></a>    <span class="op">},</span></span>
<span id="cb5-45"><a href="#cb5-45"></a>    <span class="dt">post_trial_gap</span><span class="op">:</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">function</a></span>() <span class="op">{</span></span>
<span id="cb5-46"><a href="#cb5-46"></a>        <span class="cf">return</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="dv">1500</span>) <span class="op">+</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb5-47"><a href="#cb5-47"></a>    <span class="op">}</span></span>
<span id="cb5-48"><a href="#cb5-48"></a>  <span class="op">}</span>]<span class="op">,</span></span>
<span id="cb5-49"><a href="#cb5-49"></a>  <span class="dt">timeline_variables</span><span class="op">:</span> test_stimuli<span class="op">,</span></span>
<span id="cb5-50"><a href="#cb5-50"></a>  <span class="dt">sample</span><span class="op">:</span> <span class="op">{</span><span class="dt">type</span><span class="op">:</span> <span class="st">'fixed-repetitions'</span><span class="op">,</span> <span class="dt">size</span><span class="op">:</span> reps_per_trial_type<span class="op">}</span></span>
<span id="cb5-51"><a href="#cb5-51"></a><span class="op">};</span></span>
<span id="cb5-52"><a href="#cb5-52"></a></span>
<span id="cb5-53"><a href="#cb5-53"></a><span class="co">/*defining debriefing block*/</span></span>
<span id="cb5-54"><a href="#cb5-54"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> debrief <span class="op">=</span> <span class="op">{</span></span>
<span id="cb5-55"><a href="#cb5-55"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">"html-keyboard-response"</span><span class="op">,</span></span>
<span id="cb5-56"><a href="#cb5-56"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">function</a></span>() <span class="op">{</span></span>
<span id="cb5-57"><a href="#cb5-57"></a>    <span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> congruent_rt <span class="op">=</span> <span class="va">Math</span>.<span class="at">round</span>(<span class="va">jsPsych</span>.<span class="va">data</span>.<span class="at">get</span>().<span class="at">filter</span>(<span class="op">{</span><span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">stim_type</span><span class="op">:</span> <span class="st">'congruent'</span><span class="op">}</span>).<span class="at">select</span>(<span class="st">'rt'</span>).<span class="at">mean</span>())<span class="op">;</span></span>
<span id="cb5-58"><a href="#cb5-58"></a>    <span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> incongruent_rt <span class="op">=</span> <span class="va">Math</span>.<span class="at">round</span>(<span class="va">jsPsych</span>.<span class="va">data</span>.<span class="at">get</span>().<span class="at">filter</span>(<span class="op">{</span><span class="dt">correct</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">stim_type</span><span class="op">:</span> <span class="st">'incongruent'</span><span class="op">}</span>).<span class="at">select</span>(<span class="st">'rt'</span>).<span class="at">mean</span>())<span class="op">;</span></span>
<span id="cb5-59"><a href="#cb5-59"></a>    <span class="cf">return</span> <span class="st">"&lt;p&gt;Your average response time for congruent trials was &lt;strong&gt;"</span> <span class="op">+</span> congruent_rt <span class="op">+</span> <span class="st">"ms&lt;/strong&gt;.&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb5-60"><a href="#cb5-60"></a>    <span class="st">"&lt;p&gt;Your average response time for incongruent trials was &lt;strong&gt;"</span> <span class="op">+</span> incongruent_rt <span class="op">+</span> <span class="st">"ms&lt;/strong&gt;.&lt;/p&gt;"</span><span class="op">+</span></span>
<span id="cb5-61"><a href="#cb5-61"></a>    <span class="st">"&lt;p&gt;Press any key to complete the experiment. Thank you!&lt;/p&gt;"</span><span class="op">;</span></span>
<span id="cb5-62"><a href="#cb5-62"></a>  <span class="op">}</span></span>
<span id="cb5-63"><a href="#cb5-63"></a><span class="op">};</span></span>
<span id="cb5-64"><a href="#cb5-64"></a></span>
<span id="cb5-65"><a href="#cb5-65"></a><span class="co">/*set up experiment structure*/</span></span>
<span id="cb5-66"><a href="#cb5-66"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span> timeline <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb5-67"><a href="#cb5-67"></a><span class="va">timeline</span>.<span class="at">push</span>(welcome)<span class="op">;</span></span>
<span id="cb5-68"><a href="#cb5-68"></a><span class="va">timeline</span>.<span class="at">push</span>(instructions)<span class="op">;</span></span>
<span id="cb5-69"><a href="#cb5-69"></a><span class="va">timeline</span>.<span class="at">push</span>(test)<span class="op">;</span></span>
<span id="cb5-70"><a href="#cb5-70"></a><span class="va">timeline</span>.<span class="at">push</span>(debrief)<span class="op">;</span></span>
<span id="cb5-71"><a href="#cb5-71"></a></span>
<span id="cb5-72"><a href="#cb5-72"></a><span class="co">/*start experiment*/</span></span>
<span id="cb5-73"><a href="#cb5-73"></a><span class="va">jsPsych</span>.<span class="at">init</span>(<span class="op">{</span></span>
<span id="cb5-74"><a href="#cb5-74"></a>    <span class="dt">timeline</span><span class="op">:</span> timeline<span class="op">,</span></span>
<span id="cb5-75"><a href="#cb5-75"></a>    <span class="dt">on_finish</span><span class="op">:</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">function</a></span>() <span class="op">{</span></span>
<span id="cb5-76"><a href="#cb5-76"></a>        <span class="va">jsPsych</span>.<span class="va">data</span>.<span class="at">displayData</span>()<span class="op">;</span></span>
<span id="cb5-77"><a href="#cb5-77"></a>    <span class="op">}</span></span>
<span id="cb5-78"><a href="#cb5-78"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
</div>
<div id="jspsychr-development-history" class="section level2">
<h2 class="hasAnchor">
<a href="#jspsychr-development-history" class="anchor"></a>jspsychr development history</h2>
<p>In summer 2019 I got interested in trying jspsych out for programming browser-bsaed experiments. At the same time, Danielle Navarro was developing <a href="https://github.com/djnavarro/xprmntr">xprmntr</a>, an R package for jspsych, and I forked a copy to check it out. Danielle has since totally overhauled <code>xprmntr</code>, and is working on <a href="https://github.com/djnavarro/jaysire">jaysire</a>, which also provides functionality for using R to build jspsych experiments. So what’s different?</p>
<p>As I understand the updated <code>xprmntr</code>, and <code>jaysire</code>, both are aimed at providing R wrapper functions to jspsych. I think the idea is to write the whole jspsych experiment in R, avoiding javascript altogether!</p>
<p>The aim of <code>jspsychr</code> is different in that it mixes R and javascript. Use R to do things like create your stimulus set, and use javascript to set up jspsych plugins. Check out the other packages if they suite your needs, and learn more about jspsych experiments by reading the jspsych documentation <a href="https://www.jspsych.org">https://www.jspsych.org</a></p>
</div>
<div id="more-jspsychr-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#more-jspsychr-examples" class="anchor"></a>more jspsychr examples</h2>
<p>I’ve set up another git repository with some examples of using jspsychr, you can see them here: <a href="https://github.com/CrumpLab/jspsychrexamples">https://github.com/CrumpLab/jspsychrexamples</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#whats-in-jspsychr">What’s in jspsychr?</a></li>
      <li><a href="#the-big-idea">The big idea</a></li>
      <li><a href="#installing-jspsychr">installing jspsychr</a></li>
      <li><a href="#jspsychr-template">jspsychr template</a></li>
      <li><a href="#index-rmd">index.Rmd</a></li>
      <li><a href="#major-components-of-index-rmd">Major components of index.Rmd</a></li>
      <li><a href="#yml">yml</a></li>
      <li><a href="#r-code-chunk-to-load-jspsych-plugins">R code chunk to load jspsych plugins</a></li>
      <li><a href="#r-code-chunk-to-create-stimuli">R code chunk to create stimuli</a></li>
      <li><a href="#js-code-chunk-for-jspsych">js code chunk for jspsych</a></li>
      <li><a href="#jspsychr-development-history">jspsychr development history</a></li>
      <li><a href="#more-jspsychr-examples">more jspsychr examples</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matt Crump.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
